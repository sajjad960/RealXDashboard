(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[7],{539:function(e,a,t){"use strict";var l=t(0),o=t.n(l);class n extends o.a.Component{render(){return o.a.createElement("div",{className:"vx-checkbox-con ".concat(this.props.className?this.props.className:""," vx-checkbox-").concat(this.props.color)},o.a.createElement("input",{type:"checkbox",defaultChecked:this.props.defaultChecked,checked:this.props.checked,value:this.props.value,disabled:this.props.disabled,onClick:this.props.onClick?this.props.onClick:null,onChange:this.props.onChange?this.props.onChange:null}),o.a.createElement("span",{className:"vx-checkbox vx-checkbox-".concat(this.props.size?this.props.size:"md")},o.a.createElement("span",{className:"vx-checkbox--check"},this.props.icon)),o.a.createElement("span",null,this.props.label))}}a.a=n},694:function(e,a,t){},700:function(e,a,t){},701:function(e,a,t){},710:function(e,a,t){"use strict";t.r(a);var l=t(0),o=t.n(l),n=t(556),r=t(557),s=t(287),c=t(579),i=t(684),d=t.n(i),u=t(3),m=t.n(u),p=t(689),v=t.n(p),b=t(33),E=t(46),h=t(184),g=t(198),f=t(192),y=t(183),N=t(157),x=t(182),S=t(181),C=t(577),w=t(578),k=t(558),F=t(152),O=t(43),j=t.n(O),z=t(546),P=t(547),L=t(704);t(694);function R(e){const[a,t]=Object(l.useState)([]);const{getRootProps:n,getInputProps:r}=Object(L.a)({accept:"glbFile"===e.dropFileType?".glb":"poster"===e.dropFileType?"image/*":"usdzFile"===e.dropFileType?".usdz":void 0,onDrop:a=>{e.updateStateFile(e.dropFileType,a[0]),t(a.map(e=>Object.assign(e,{preview:URL.createObjectURL(e)})))}}),s=a.map(a=>o.a.createElement("div",{className:"dz-thumb",key:a.name},"poster"===e.dropFileType?o.a.createElement("div",{className:"dz-thumb",key:a.name},o.a.createElement("div",{className:"dz-thumb-inner"},o.a.createElement("img",{src:a.preview,className:"dz-img",alt:a.name}))):o.a.createElement("div",{className:"dz-thumb-inner"},o.a.createElement("p",null,a.name),o.a.createElement("p",null,a.size," bytes"))));return Object(l.useEffect)(()=>()=>{a.forEach(e=>URL.revokeObjectURL(e.preview))},[a]),o.a.createElement("section",null,o.a.createElement("div",n({className:"dropzone"}),o.a.createElement("input",r()),o.a.createElement("p",{className:"mx-1"},"Drag 'n' drop some files here, or click to select files")),o.a.createElement("aside",{className:"thumb-container"},s))}class D extends o.a.Component{render(){return o.a.createElement(z.a,null,o.a.createElement(P.a,null,o.a.createElement(R,{updateStateFile:this.props.updateStateFile,dropFileType:this.props.dropFileType})))}}var U=D,T=t(57),_=t(147),A=t(146),M=t(105);var Q=e=>{let{show:a,handleSidebar:t,data:n}=e;const r=Object(_.a)({formData:!0}),i=Object(T.useQueryClient)(),d=Object(A.a)(),[u,p]=Object(l.useState)({url:"",name:"",usdzFile:"",glbFile:"",poster:"",model_placement:""}),[v,b]=Object(l.useState)(!1);Object(l.useEffect)(()=>{p(null!==n?{url:null===n||void 0===n?void 0:n.url,name:null===n||void 0===n?void 0:n.name,usdzFile:"",glbFile:"",poster:"",model_placement:null===n||void 0===n?void 0:n.model_placement}:{url:"",name:"",usdzFile:"",glbFile:"",poster:"",model_placement:"floor"}),b(!1)},[n]);const E=(e,a)=>{p({...u,[e]:a})},{mutate:h,isLoading:g}=Object(T.useMutation)(e=>r.createProduct(e),{onSuccess:e=>{d(null===e||void 0===e?void 0:e.message,"success"),i.invalidateQueries(M.a.products),i.invalidateQueries(M.a.dashboard)},onError:e=>{console.log(e),d(e.message)}}),{mutate:f,isLoading:y}=Object(T.useMutation)(e=>r.updateProduct(e),{onSuccess:e=>{d(null===e||void 0===e?void 0:e.message,"success"),i.invalidateQueries(M.a.products)},onError:e=>{console.log(e),d(e.message)}});console.log("form Data",u);const{url:N,name:x,model_placement:S}=u;return o.a.createElement("div",{className:m()("data-list-sidebar",{show:a})},o.a.createElement("div",{className:"data-list-sidebar-header mt-2 px-2 d-flex justify-content-between"},o.a.createElement("h4",null,null!==n?"UPDATE PRODUCT":"ADD NEW PRODUCT"),o.a.createElement(F.a,{size:20,onClick:()=>t(!1,!0)})),o.a.createElement(j.a,{className:"data-list-fields px-2 mt-3",options:{wheelPropagation:!1}},o.a.createElement(C.a,null,o.a.createElement(w.a,{for:"data-name",style:{fontSize:"1rem"},className:"text-bold-500"},"Name"),o.a.createElement(c.a,{type:"text",value:x,required:!0,placeholder:"Product Name",onChange:e=>p({...u,name:e.target.value}),id:"data-name"}),o.a.createElement(w.a,{for:"data-name",style:{fontSize:"1rem"},className:"text-bold-500"},"URL"),o.a.createElement(c.a,{type:"text",value:N,required:!0,placeholder:"Product Url",onChange:e=>p({...u,url:e.target.value}),id:"data-name"})),o.a.createElement(C.a,null,o.a.createElement(w.a,{for:"Poster",style:{fontSize:"1rem"},className:"text-bold-500"},"Poster"),o.a.createElement(U,{updateStateFile:E,dropFileType:"poster"})),o.a.createElement(C.a,null,o.a.createElement(w.a,{for:"glb-model",style:{fontSize:"1rem"},className:"text-bold-500"},"GLB Model"),o.a.createElement(U,{updateStateFile:E,dropFileType:"glbFile"})),o.a.createElement(C.a,null,o.a.createElement(w.a,{for:"usdz-model",style:{fontSize:"1rem"},className:"text-bold-500"},"USDZ Model"),o.a.createElement(U,{updateStateFile:E,dropFileType:"usdzFile"})),o.a.createElement(C.a,null,o.a.createElement(w.a,{for:"model-placement",style:{fontSize:"1rem"},className:"text-bold-500"},"Model Placement"),o.a.createElement(c.a,{type:"select",id:"model-placement",value:S,onChange:e=>p({...u,model_placement:e.target.value})},o.a.createElement("option",{value:"floor"},"Floor"),o.a.createElement("option",{value:"wall"},"Wall")))),o.a.createElement("div",{className:"data-list-sidebar-footer px-2 d-flex justify-content-start align-items-center mt-1"},g||y?o.a.createElement(k.a,{color:"primary"}):o.a.createElement(s.a,{color:"primary",onClick:()=>{if(null!==n){const e={...u,product_id:null===n||void 0===n?void 0:n.id,url:(null===u||void 0===u?void 0:u.url)===(null===n||void 0===n?void 0:n.url)?"":null===u||void 0===u?void 0:u.url};f(e)}else b(!0),h(u)}},null!==n?"Update":"Submit"),o.a.createElement(s.a,{className:"ml-1",color:"danger",outline:!0,onClick:()=>t(!1,!0)},"Cancel")))},I=t(539),H=t(695),J=t(561),W=t(705);t(700),t(701);const q={1:"success",0:"danger"},V={rows:{selectedHighlighStyle:{backgroundColor:"rgba(115,103,240,.05)",color:"#7367F0 !important",boxShadow:"0 0 1px 0 #7367F0 !important","&:hover":{transform:"translateY(0px) !important"}}}},B=e=>o.a.createElement("div",{className:"data-list-action"},o.a.createElement(h.a,{className:"cursor-pointer mr-1",size:20,onClick:()=>e.currentData(e.row)}),o.a.createElement(g.a,{className:"cursor-pointer",size:20,onClick:()=>{e.deleteRow(e.row)}})),G=e=>{const{name:a}=e.filterValues,t=Object(W.a)(e.handleFilter,500);return o.a.createElement("div",{className:"data-list-header d-flex justify-content-between flex-wrap"},o.a.createElement("div",{className:"actions-left d-flex flex-wrap"},o.a.createElement(s.a,{className:"add-new-btn",color:"primary",onClick:()=>e.handleSidebar(!0,!0),outline:!0},o.a.createElement(f.a,{size:15}),o.a.createElement("span",{className:"align-middle"},"Add New"))),o.a.createElement("div",{className:"actions-right d-flex flex-wrap mt-sm-0 mt-2"},o.a.createElement("div",{className:"filter-section"},o.a.createElement(c.a,{type:"text",name:"name",placeholder:"Search By Product Name",onChange:e=>{const a=e.target.value,l=e.target.name;t(l,a)}}))))},K=e=>{let{row:a,updateStatus:t}=e;const[n,r]=Object(l.useState)(a.status);return o.a.createElement(C.a,null,o.a.createElement(c.a,{type:"select",value:n,onChange:e=>{const l=e.target.value;r(l),t(a.id,l)},style:{backgroundColor:"success"===q[n]?"rgb(143 217 112)":"#F8D7DA",cursor:"pointer",fontWeight:"500",textAlign:"center",marginTop:"1.5rem",width:"100",padding:"6px"}},o.a.createElement("option",{value:"1"},"Active"),o.a.createElement("option",{value:"0"},"Inactive")))},Y=e=>{let{src:a,alt:t}=e;const[n,r]=Object(l.useState)(!0);return o.a.createElement("div",{style:{position:"relative"}},n&&a&&o.a.createElement("div",null,"Loading..."),o.a.createElement("img",{src:a,alt:t,height:"100",onLoad:()=>{r(!1)},style:{display:n?"none":"block"}}))};var Z=()=>{var e;const a=Object(_.a)({formData:!1}),t=Object(E.h)(),n=Object(T.useQueryClient)(),r=Object(A.a)(),[s,c]=Object(l.useState)(0),[i,u]=Object(l.useState)(0),[p,h]=Object(l.useState)(!1),[g,f]=Object(l.useState)(null),[C,w]=Object(l.useState)({copied:!1,rowId:""}),[k,F]=Object(l.useState)({});Object(l.useEffect)(()=>{const e=new URLSearchParams(t.search),a={};e.forEach((e,t)=>{a[t]=e}),console.log("iam callijng",a),F(a)},[t.search]);const{data:O,isLoading:j,refetch:z,isFetching:P}=Object(T.useQuery)({queryKey:[M.a.products],queryFn:()=>a.getProducts(k),onSuccess:e=>{console.log("pdata",e),(e=>{const a=null===e||void 0===e?void 0:e.total,t=Math.ceil(a/10);c(t)})(e)},onError:e=>{r(null===e||void 0===e?void 0:e.message)}});Object(l.useEffect)(()=>{z()},[k,z]),console.log(j,"isloading");const{mutate:L}=Object(T.useMutation)(e=>a.updateProduct(e),{onSuccess:e=>{var a;4===Number(null===e||void 0===e||null===(a=e.product)||void 0===a?void 0:a.status)?r("Product has beed deleted","error"):r(null===e||void 0===e?void 0:e.message,"success"),n.setQueryData([M.a.products],a=>{var t;let l;var o,n;4===Number(null===e||void 0===e||null===(t=e.product)||void 0===t?void 0:t.status)?l=null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.filter(a=>{var t;return(null===a||void 0===a?void 0:a.id)!==(null===e||void 0===e||null===(t=e.product)||void 0===t?void 0:t.id)}):l=null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.map(a=>{var t,l;return(null===a||void 0===a?void 0:a.id)===(null===e||void 0===e||null===(t=e.product)||void 0===t?void 0:t.id)?{...a,status:Number(null===e||void 0===e||null===(l=e.product)||void 0===l?void 0:l.status)}:a});return{...a,data:l}}),n.invalidateQueries(M.a.dashboard)},onError:e=>{console.log(e),r(e.message)}}),R=Object(l.useMemo)(()=>O,[O]);let D=[{name:"Image",selector:"img",minWidth:"220px",cell:e=>{var a,t;return o.a.createElement(Y,{src:null===(a=JSON.parse(null===e||void 0===e?void 0:e.poster))||void 0===a?void 0:a.posterFileLink,alt:null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:""})}},{name:"Name",selector:"name",sortable:!0,minWidth:"250px",cell:e=>o.a.createElement("p",{title:null===e||void 0===e?void 0:e.name,className:"text-truncate text-bold-500 mb-0"},null===e||void 0===e?void 0:e.name)},{name:"Url",selector:"url",sortable:!0,cell:e=>"".concat(null===e||void 0===e?void 0:e.url)},{name:"Usdz",selector:"usdz",sortable:!0,cell:e=>{var a,t;return(null===(a=JSON.parse(null===e||void 0===e?void 0:e.models))||void 0===a||null===(t=a[0].usdzFile)||void 0===t?void 0:t.usdzFileLink)?"Available":"Null"}},{name:"Glb",selector:"glb",sortable:!0,cell:e=>{var a,t;return(null===(a=JSON.parse(null===e||void 0===e?void 0:e.models))||void 0===a||null===(t=a[0].glbFile)||void 0===t?void 0:t.glbFileLink)?"Available":"Null"}},{name:"Status",selector:"status",sortable:!0,cell:e=>o.a.createElement(K,{row:e,updateStatus:Z})},{name:"Views",selector:"product_views",sortable:!0,cell:e=>{var a,t;return"".concat(null!==(a=null===e||void 0===e||null===(t=e.product_log_details)||void 0===t?void 0:t.product_views)&&void 0!==a?a:0)}},{name:"Links",selector:"link",cell:e=>{const a="https://mysellbee.com/view/ar/user_id=".concat(null===e||void 0===e?void 0:e.user_id,"/url=").concat(null===e||void 0===e?void 0:e.url);return o.a.createElement("div",null,o.a.createElement(H.CopyToClipboard,{text:a,onCopy:()=>w({...C,copied:!0,rowId:null===e||void 0===e?void 0:e.id})},(null===C||void 0===C?void 0:C.copied)&&(null===C||void 0===C?void 0:C.rowId)===(null===e||void 0===e?void 0:e.id)?o.a.createElement("button",{style:{backgroundColor:"#000000d6",color:"white",padding:"5px",borderRadius:"5px"}},"Copied"):o.a.createElement("button",{style:{backgroundColor:"black",color:"white",padding:"9px",borderRadius:"5px"}},"Copy")))}},{name:"Actions",sortable:!0,cell:e=>o.a.createElement(B,{row:e,currentData:q,deleteRow:W})}];const U=function(e){h(e)},W=e=>{const a={status:4,product_id:null===e||void 0===e?void 0:e.id,url:""};L(a)},q=e=>{f(e),U(!0)},Z=(e,a)=>{const t={status:Number(a),product_id:e,url:""};L(t)};return o.a.createElement("div",{className:"data-list list-view}"},j||P?o.a.createElement("div",{className:"mt-lg-5"},o.a.createElement(J.a,null)):o.a.createElement(d.a,{columns:D,data:null!==(e=null===R||void 0===R?void 0:R.data)&&void 0!==e?e:[],pagination:!0,paginationServer:!0,paginationComponent:()=>o.a.createElement(v.a,{previousLabel:o.a.createElement(y.a,{size:15}),nextLabel:o.a.createElement(N.a,{size:15}),breakLabel:"...",breakClassName:"break-me",pageCount:s,containerClassName:"vx-pagination separated-pagination pagination-center pagination-sm mb-0 mt-2",activeClassName:"active",forcePage:i,onPageChange:e=>(e=>{var a;u(e.selected);const t={...k,page:null!==(a=(null===e||void 0===e?void 0:e.selected)+1)&&void 0!==a?a:1};console.log("updated page filter",t);const l=new URLSearchParams(t).toString();b.a.push({search:l}),F(t)})(e)}),noHeader:!0,subHeader:!0,responsive:!0,pointerOnHover:!0,selectableRowsHighlight:!0,customStyles:V,subHeaderComponent:o.a.createElement(G,{handleSidebar:U,handleFilter:async(e,a)=>{let t={};""!==a.trim()&&(t={...k,[e]:a,page:1});const l=new URLSearchParams(t).toString();b.a.push({search:l}),u(0),F(t)},filterValues:k}),sortIcon:o.a.createElement(x.a,null),selectableRowsComponent:I.a,selectableRowsComponentProps:{color:"primary",icon:o.a.createElement(S.a,{className:"vx-icon",size:12}),label:"",size:"sm"}}),o.a.createElement(Q,{show:p,data:g,handleSidebar:U}),o.a.createElement("div",{className:m()("data-list-overlay",{show:p}),onClick:()=>U(!1,!0)}))};class X extends o.a.Component{render(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(n.a,null,o.a.createElement(r.a,{sm:"12"},o.a.createElement(Z,null))))}}a.default=X}}]);
//# sourceMappingURL=7.e1dec543.chunk.js.map